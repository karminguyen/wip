<html>
<head>

    <!--

    NOTE: MUST BE OPENED USING THIS URL: https://s3-eu-west-1.amazonaws.com/gc4-cdn/wip/JavaScript/REST-Example.html?AWSAccessKeyId=ASIAJTRW4N4CB6RBGZUQ&Expires=1347482377&Signature=kfNxNZm1RpCzGK9mnewP3DLC84I%3D&x-amz-security-token=AQoDYXdzEGUakALe6S0qM/mhR9CeP18n%2BfXEKmAPwIO/PBRSCbZqvfn6nzDymQEBDJ3KWzfZ9nu%2BhClHSnN5GUIwnyVo2jL5FKhl/qhgqKKK951kVREVzDTKLWHfUoaPN6GrEsthnWgm6f9KNswcpfPP1uKRu9jzX8wau/UZ9TkSIYNGeLEMPFvwdqi0ne/qjwfou9OmKsZBbvst%2BvPUITxH1OxTZNXjVa/hV7awbabd31sJJeGp%2BxPQhbgLH0ubFIYZ1yIpArL/csMhD5sGw9iI5nnWzxIuQMohrwpnsknG7RBUyQbDXRXvjhu8JBOK9zgnymV9OEb4XIf6CO/2NDSXoR5oRaGeC%2BxxPy0D05HBbeGnxMxGBZzp5yCk18OCBQ%3D%3D


    REST CALLS WILL NOT WORK OTHERWISE DUE TO CORS POLCIES!!!

    -->


	<title>Views Example 1</title>
	
	<!-- My unit test and logging functions -->
	<script src="lib/basic.js"></script>

	<!-- Used for the views -->
	<script src="lib/underscore-min.js"></script>
	<script src="lib/jquery.min.js"></script>
	<script>

	window.onload = function(){

		// Cache the template function 
		var tmpl = _.template($('#item-template').html());
		
		// Manage the event when add is clicked
		$('#add').on('click', function() {			
			var _todo = $('#new-todo')[0];
			log('logging add '+_todo.value +'...');
			$('#todos')[0].innerHTML = tmpl( {title: _todo.value} );


			// Play around with REST
			$.getJSON('https://s3-eu-west-1.amazonaws.com/gc4-cdn/wip/JavaScript/ajax/test.json', function(data) {
				var items = [];

				// log('logging json 1: ' + data);

				$.each(data, function(key, val) {
				    items.push('<li id="' + key + '">' + val + '</li>');
				});

				log('logging json: 2 ' + items.join(''));

				$('<ul/>', {
				    'class': 'my-new-list',
				    html: items.join('')
				}).appendTo('body');
			});

		});
		
		test("Testing Underscore views...", function(){	
			// Doing nothing right now
		});
  
	};
	</script>

	<style>
		#results li.pass { color: green; }
		#results li.fail { color: red; }
	</style>


</head>
<body>

	<div id="myapp">
	
		<header>
			<h1>My App</h1>
		</header>
		
		<section id="input-section">
			<input id="new-todo" type="text" placeholder="What needs to be done?"/>
			<a id="add">Add</a>
		</section>

		<section id="todos">
		</section>
		
		<footer>
			2012 by Gizur AB
		</footer>
	  
	</div>
	
	<ul id="results"></ul>

	<!-- Templates -->
	
	<script type="text/template" id="item-template">
	  <div>
	    <br/><label><%= title %></label><br/><br/>
	  </div>
	</script>


</body>
</html>

